
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Improved Identifiers &#8212; JMESPath</title>
    <link rel="stylesheet" href="../_static/jmespath.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Filter Expressions" href="jep-007-filter-expressions.html" />
    <link rel="prev" title="Array Slice Expressions" href="jep-005-array-slices.html" />
  
   

  </head><body>
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#toggle-main-nav">
      </button>
      <a class="navbar-brand" href="../contents.html"></a>
    </div>
    <div class="collapse navbar-collapse" id="toggle-main-nav">
      <ul class="nav navbar-nav">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../tutorial.html">Tutorial</a></li>
        <li><a href="../examples.html">Examples</a></li>
        <li><a href="../specification.html">Specification</a></li>
        <li><a href="../libraries.html">Libraries</a></li>
        <li><a href="https://github.com/jmespath-community">Github</a></li>
      </ul>
    </div>
  </div>
</nav>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="jep-007-filter-expressions.html" title="Filter Expressions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="jep-005-array-slices.html" title="Array Slice Expressions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">JMESPath</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../proposals.html" accesskey="U">JMESPath Proposals</a> &#187;</li> 
      </ul>
    </div>
        <div class="container">
            <div class="main-content">
              <div class="row">
                  <div class="col-md-9 col-md-push-3">
                    
  <div class="section" id="improved-identifiers">
<h1>Improved Identifiers<a class="headerlink" href="#improved-identifiers" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">JEP:</th><td class="field-body">6</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">James Saryerwinnie</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status:</th><td class="field-body">accepted</td>
</tr>
<tr class="field-even field"><th class="field-name">Created:</th><td class="field-body">14-Dec-2013</td>
</tr>
<tr class="field-odd field"><th class="field-name">Last Updated:</th><td class="field-body">15-Dec-2013</td>
</tr>
</tbody>
</table>
<div class="section" id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This JEP proposes grammar modifications to JMESPath in order to improve
identifiers used in JMESPath.  In doing so, several inconsistencies in the
identifier grammar rules will be fixed, along with an improved grammar for
specifying unicode identifiers in a way that is consistent with JSON
strings.</p>
</div>
<div class="section" id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to currently specify an identifier, the unquoted rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identifier</span>        <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">char</span>
</pre></div>
</div>
<p>and the quoted rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identifier</span>        <span class="o">=/</span> <span class="n">quote</span> <span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">unescaped</span><span class="o">-</span><span class="n">char</span> <span class="o">/</span> <span class="n">escaped</span><span class="o">-</span><span class="n">quote</span><span class="p">)</span> <span class="n">quote</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">char</span></code> rule contains a set of characters that do <strong>not</strong> have to be
quoted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">char</span>              <span class="o">=</span> <span class="o">%</span><span class="n">x30</span><span class="o">-</span><span class="mi">39</span> <span class="o">/</span> <span class="p">;</span> <span class="mi">0</span><span class="o">-</span><span class="mi">9</span>
                    <span class="o">%</span><span class="n">x41</span><span class="o">-</span><span class="mi">5</span><span class="n">A</span> <span class="o">/</span> <span class="p">;</span> <span class="n">A</span><span class="o">-</span><span class="n">Z</span>
                    <span class="o">%</span><span class="n">x5F</span> <span class="o">/</span>    <span class="p">;</span> <span class="n">_</span>
                    <span class="o">%</span><span class="n">x61</span><span class="o">-</span><span class="mi">7</span><span class="n">A</span> <span class="o">/</span> <span class="p">;</span> <span class="n">a</span><span class="o">-</span><span class="n">z</span>
                    <span class="o">%</span><span class="n">x7F</span><span class="o">-</span><span class="mi">10</span><span class="n">FFFF</span>
</pre></div>
</div>
<p>There is an ambiguity between the <code class="docutils literal notranslate"><span class="pre">%x30-39</span></code> rule and the <code class="docutils literal notranslate"><span class="pre">number</span></code> rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">number</span>            <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-&quot;</span><span class="p">]</span><span class="mi">1</span><span class="o">*</span><span class="n">digit</span>
<span class="n">digit</span>             <span class="o">=</span> <span class="s2">&quot;1&quot;</span> <span class="o">/</span> <span class="s2">&quot;2&quot;</span> <span class="o">/</span> <span class="s2">&quot;3&quot;</span> <span class="o">/</span> <span class="s2">&quot;4&quot;</span> <span class="o">/</span> <span class="s2">&quot;5&quot;</span> <span class="o">/</span> <span class="s2">&quot;6&quot;</span> <span class="o">/</span> <span class="s2">&quot;7&quot;</span> <span class="o">/</span> <span class="s2">&quot;8&quot;</span> <span class="o">/</span> <span class="s2">&quot;9&quot;</span> <span class="o">/</span> <span class="s2">&quot;0&quot;</span>
</pre></div>
</div>
<p>It’s ambiguous which rule to use.  Given a string “123”, it’s not clear whether
this should be parsed as an identifier or a number. Existing implementations
<strong>aren’t</strong> following this rule (because it’s ambiguous) so the grammar should
be updated to remove the ambiguity, specifically, an unquoted identifier can
only start with the characters <code class="docutils literal notranslate"><span class="pre">[a-zA-Z_]</span></code>.</p>
<div class="section" id="unicode">
<h3>Unicode<a class="headerlink" href="#unicode" title="Permalink to this headline">¶</a></h3>
<p>JMESPath supports unicode through the <code class="docutils literal notranslate"><span class="pre">char</span></code>  and <code class="docutils literal notranslate"><span class="pre">unescaped-char</span></code> rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unescaped</span><span class="o">-</span><span class="n">char</span>    <span class="o">=</span> <span class="o">%</span><span class="n">x30</span><span class="o">-</span><span class="mi">10</span><span class="n">FFFF</span>
<span class="n">char</span>              <span class="o">=</span> <span class="o">%</span><span class="n">x30</span><span class="o">-</span><span class="mi">39</span> <span class="o">/</span> <span class="p">;</span> <span class="mi">0</span><span class="o">-</span><span class="mi">9</span>
                    <span class="o">%</span><span class="n">x41</span><span class="o">-</span><span class="mi">5</span><span class="n">A</span> <span class="o">/</span> <span class="p">;</span> <span class="n">A</span><span class="o">-</span><span class="n">Z</span>
                    <span class="o">%</span><span class="n">x5F</span> <span class="o">/</span>    <span class="p">;</span> <span class="n">_</span>
                    <span class="o">%</span><span class="n">x61</span><span class="o">-</span><span class="mi">7</span><span class="n">A</span> <span class="o">/</span> <span class="p">;</span> <span class="n">a</span><span class="o">-</span><span class="n">z</span>
                    <span class="o">%</span><span class="n">x7F</span><span class="o">-</span><span class="mi">10</span><span class="n">FFFF</span>
</pre></div>
</div>
<p>However, JSON supports a syntax for escaping unicode characters.  Any
character in the Basic Multilingual Plane (BMP) can be escaped with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">char</span> <span class="o">=</span> <span class="n">escape</span> <span class="p">(</span><span class="o">%</span><span class="n">x75</span> <span class="mi">4</span><span class="n">HEXDIG</span> <span class="p">)</span>  <span class="p">;</span> \<span class="n">uXXXX</span>
</pre></div>
</div>
<p>Similar to the way that XPath supports numeric character references used
in XML (<code class="docutils literal notranslate"><span class="pre">&amp;#nnnn</span></code>), JMESPath should support the same escape sequences
used in JSON.  JSON also supports a 12 character escape sequence for
characters outside of the BMP, by encoding the UTF-16 surrogate pair.
For example, the code point <code class="docutils literal notranslate"><span class="pre">U+1D11E</span></code> can be represented
as <code class="docutils literal notranslate"><span class="pre">&quot;\uD834\uDD1E&quot;</span></code>.</p>
</div>
<div class="section" id="escape-sequences">
<h3>Escape Sequences<a class="headerlink" href="#escape-sequences" title="Permalink to this headline">¶</a></h3>
<p>Consider the following JSON object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;foo</span><span class="se">\n</span><span class="s2">bar&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>A JMESPath expression should be able to retrieve the value of baz.  With
the current grammar, one must rely on the environment’s ability to input
control characters such as the newline (<code class="docutils literal notranslate"><span class="pre">%x0A</span></code>).  This can be problematic
in certain environments.  For example, in python, this is not a problem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">jmespath_expression</span> <span class="o">=</span> <span class="s2">&quot;foo</span><span class="se">\n</span><span class="s2">bar&quot;</span>
</pre></div>
</div>
<p>Python will interpret the sequence <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> (<code class="docutils literal notranslate"><span class="pre">%x5C</span> <span class="pre">%x6E</span></code>) as the newline
character <code class="docutils literal notranslate"><span class="pre">%x0A</span></code>.  However, consider Bash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ foo --jmespath-expression &quot;foo\nbar&quot;
</pre></div>
</div>
<p>In this situation, bash will not interpret the <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> (<code class="docutils literal notranslate"><span class="pre">%x5C</span> <span class="pre">%x6E</span></code>)
sequence.</p>
</div>
</div>
<div class="section" id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">char</span></code> rule contains a set of characters that do <strong>not</strong> have to be
quoted.  The new set of characters that do not have to quoted will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unquoted</span><span class="o">-</span><span class="n">string</span>   <span class="o">=</span> <span class="p">(</span><span class="o">%</span><span class="n">x41</span><span class="o">-</span><span class="mi">5</span><span class="n">A</span> <span class="o">/</span> <span class="o">%</span><span class="n">x61</span><span class="o">-</span><span class="mi">7</span><span class="n">A</span> <span class="o">/</span> <span class="o">%</span><span class="n">x5F</span><span class="p">)</span> <span class="o">*</span><span class="p">(</span><span class="o">%</span><span class="n">x30</span><span class="o">-</span><span class="mi">39</span> <span class="o">/</span> <span class="o">%</span><span class="n">x41</span><span class="o">-</span><span class="mi">5</span><span class="n">A</span> <span class="o">/</span> <span class="o">%</span><span class="n">x5F</span> <span class="o">/</span> <span class="o">%</span><span class="n">x61</span><span class="o">-</span><span class="mi">7</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>In order for an identifier to not be quoted, it must start with <code class="docutils literal notranslate"><span class="pre">[A-Za-z_]</span></code>,
then must be followed by zero or more <code class="docutils literal notranslate"><span class="pre">[0-9A-Za-z_]</span></code>.</p>
<p>The unquoted rule is updated to account for all JSON supported escape
sequences:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quoted</span><span class="o">-</span><span class="n">string</span>     <span class="o">=/</span> <span class="n">quote</span> <span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">unescaped</span><span class="o">-</span><span class="n">char</span> <span class="o">/</span> <span class="n">escaped</span><span class="o">-</span><span class="n">char</span><span class="p">)</span> <span class="n">quote</span>
</pre></div>
</div>
<p>The full rule for an identifier is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identifier</span>        <span class="o">=</span> <span class="n">unquoted</span><span class="o">-</span><span class="n">string</span> <span class="o">/</span> <span class="n">quoted</span><span class="o">-</span><span class="n">string</span>
<span class="n">unquoted</span><span class="o">-</span><span class="n">string</span>   <span class="o">=</span> <span class="p">(</span><span class="o">%</span><span class="n">x41</span><span class="o">-</span><span class="mi">5</span><span class="n">A</span> <span class="o">/</span> <span class="o">%</span><span class="n">x61</span><span class="o">-</span><span class="mi">7</span><span class="n">A</span> <span class="o">/</span> <span class="o">%</span><span class="n">x5F</span><span class="p">)</span> <span class="o">*</span><span class="p">(</span>  <span class="p">;</span> <span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z_</span>
                        <span class="o">%</span><span class="n">x30</span><span class="o">-</span><span class="mi">39</span>  <span class="o">/</span>  <span class="p">;</span> <span class="mi">0</span><span class="o">-</span><span class="mi">9</span>
                        <span class="o">%</span><span class="n">x41</span><span class="o">-</span><span class="mi">5</span><span class="n">A</span> <span class="o">/</span>  <span class="p">;</span> <span class="n">A</span><span class="o">-</span><span class="n">Z</span>
                        <span class="o">%</span><span class="n">x5F</span>    <span class="o">/</span>  <span class="p">;</span> <span class="n">_</span>
                        <span class="o">%</span><span class="n">x61</span><span class="o">-</span><span class="mi">7</span><span class="n">A</span><span class="p">)</span>   <span class="p">;</span> <span class="n">a</span><span class="o">-</span><span class="n">z</span>
<span class="n">quoted</span><span class="o">-</span><span class="n">string</span>     <span class="o">=</span> <span class="n">quote</span> <span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">unescaped</span><span class="o">-</span><span class="n">char</span> <span class="o">/</span> <span class="n">escaped</span><span class="o">-</span><span class="n">char</span><span class="p">)</span> <span class="n">quote</span>
<span class="n">unescaped</span><span class="o">-</span><span class="n">char</span>    <span class="o">=</span> <span class="o">%</span><span class="n">x20</span><span class="o">-</span><span class="mi">21</span> <span class="o">/</span> <span class="o">%</span><span class="n">x23</span><span class="o">-</span><span class="mi">5</span><span class="n">B</span> <span class="o">/</span> <span class="o">%</span><span class="n">x5D</span><span class="o">-</span><span class="mi">10</span><span class="n">FFFF</span>
<span class="n">escape</span>            <span class="o">=</span> <span class="o">%</span><span class="n">x5C</span>   <span class="p">;</span> <span class="n">Back</span> <span class="n">slash</span><span class="p">:</span> \
<span class="n">quote</span>             <span class="o">=</span> <span class="o">%</span><span class="n">x22</span>   <span class="p">;</span> <span class="n">Double</span> <span class="n">quote</span><span class="p">:</span> <span class="s1">&#39;&quot;&#39;</span>
<span class="n">escaped</span><span class="o">-</span><span class="n">char</span>      <span class="o">=</span> <span class="n">escape</span> <span class="p">(</span>
                        <span class="o">%</span><span class="n">x22</span> <span class="o">/</span>          <span class="p">;</span> <span class="s2">&quot;    quotation mark  U+0022</span>
                        <span class="o">%</span><span class="n">x5C</span> <span class="o">/</span>          <span class="p">;</span> \    <span class="n">reverse</span> <span class="n">solidus</span> <span class="n">U</span><span class="o">+</span><span class="mi">005</span><span class="n">C</span>
                        <span class="o">%</span><span class="n">x2F</span> <span class="o">/</span>          <span class="p">;</span> <span class="o">/</span>    <span class="n">solidus</span>         <span class="n">U</span><span class="o">+</span><span class="mi">002</span><span class="n">F</span>
                        <span class="o">%</span><span class="n">x62</span> <span class="o">/</span>          <span class="p">;</span> <span class="n">b</span>    <span class="n">backspace</span>       <span class="n">U</span><span class="o">+</span><span class="mi">0008</span>
                        <span class="o">%</span><span class="n">x66</span> <span class="o">/</span>          <span class="p">;</span> <span class="n">f</span>    <span class="n">form</span> <span class="n">feed</span>       <span class="n">U</span><span class="o">+</span><span class="mi">000</span><span class="n">C</span>
                        <span class="o">%</span><span class="n">x6E</span> <span class="o">/</span>          <span class="p">;</span> <span class="n">n</span>    <span class="n">line</span> <span class="n">feed</span>       <span class="n">U</span><span class="o">+</span><span class="mi">000</span><span class="n">A</span>
                        <span class="o">%</span><span class="n">x72</span> <span class="o">/</span>          <span class="p">;</span> <span class="n">r</span>    <span class="n">carriage</span> <span class="k">return</span> <span class="n">U</span><span class="o">+</span><span class="mi">000</span><span class="n">D</span>
                        <span class="o">%</span><span class="n">x74</span> <span class="o">/</span>          <span class="p">;</span> <span class="n">t</span>    <span class="n">tab</span>             <span class="n">U</span><span class="o">+</span><span class="mi">0009</span>
                        <span class="o">%</span><span class="n">x75</span> <span class="mi">4</span><span class="n">HEXDIG</span> <span class="p">)</span>  <span class="p">;</span> <span class="n">uXXXX</span>                <span class="n">U</span><span class="o">+</span><span class="n">XXXX</span>
</pre></div>
</div>
</div>
<div class="section" id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline">¶</a></h2>
<p>Adopting the same string rules as JSON strings will allow users familiar with
JSON semantics to understand how JMESPath identifiers will work.</p>
<p>This change also provides a nice consistency for the literal syntax proposed
in JEP 3.  With this model, the supported literal strings can be the same
as quoted identifiers.</p>
<p>This also will allow the grammar to grow in a consistent way if JMESPath
adds support for filtering based on literal values.  For example (note that
this is just a suggested syntax, not a formal proposal), given the data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;✓&quot;</span><span class="p">:</span> <span class="s2">&quot;✓&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;✓&quot;</span><span class="p">:</span> <span class="s2">&quot;✗&quot;</span><span class="p">}]}</span>
</pre></div>
</div>
<p>You can now have the following JMESPath expressions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>foo[?&quot;✓&quot; = `✓`]
foo[?&quot;\u2713&quot; = `\u2713`]
</pre></div>
</div>
<p>As a general property, any supported JSON string is now a supported quoted
identifier.</p>
</div>
<div class="section" id="impact">
<h2>Impact<a class="headerlink" href="#impact" title="Permalink to this headline">¶</a></h2>
<p>For any implementation that was parsing digits as an identifier, identifiers
starting with digits will no longer be valid, e.g. <code class="docutils literal notranslate"><span class="pre">foo.0.1.2</span></code>.</p>
<p>There are several compliance tests that will have to be updated as a result
of this JEP.  They were arguably wrong to begin with.</p>
<div class="section" id="basic-json">
<h3>basic.json<a class="headerlink" href="#basic-json" title="Permalink to this headline">¶</a></h3>
<p>The following needs to be changed because identifiers starting
with a number must now be quoted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.1&quot;</span><span class="p">,</span>
<span class="o">+</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.</span><span class="se">\&quot;</span><span class="s2">1</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
             <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]</span>
          <span class="p">},</span>
          <span class="p">{</span>
<span class="o">-</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.1[0]&quot;</span><span class="p">,</span>
<span class="o">+</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.</span><span class="se">\&quot;</span><span class="s2">1</span><span class="se">\&quot;</span><span class="s2">[0]&quot;</span><span class="p">,</span>
             <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;one&quot;</span>
          <span class="p">},</span>
</pre></div>
</div>
<p>Similarly, the following needs to be changed because an unquoted
identifier cannot start with <code class="docutils literal notranslate"><span class="pre">-</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.-1&quot;</span><span class="p">,</span>
<span class="o">+</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.</span><span class="se">\&quot;</span><span class="s2">-1</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
             <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span>
          <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="escape-json">
<h3>escape.json<a class="headerlink" href="#escape-json" title="Permalink to this headline">¶</a></h3>
<p>The escape.json has several more interseting cases that need to be updated.
This has to do with the updated escaping rules.  Each one will be explained.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">foo</span><span class="se">\n</span><span class="s2">bar</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="o">+</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">foo</span><span class="se">\\</span><span class="s2">nbar</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
             <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;newline&quot;</span>
          <span class="p">},</span>
</pre></div>
</div>
<p>This has to be updated because a JSON parser will interpret the <code class="docutils literal notranslate"><span class="pre">\n</span></code> sequence
as the newline character.  The newline character is <strong>not</strong> allowed in a
JMESPath identifier (note that the newline character <code class="docutils literal notranslate"><span class="pre">%0A</span></code> is not in any
rule).  In order for a JSON parser to create a sequence of <code class="docutils literal notranslate"><span class="pre">%x5C</span> <span class="pre">%x6E</span></code>, the
JSON string must be <code class="docutils literal notranslate"><span class="pre">\\n</span></code> (<code class="docutils literal notranslate"><span class="pre">%x5C</span> <span class="pre">%x5C</span> <span class="pre">%x6E</span></code>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">c:</span><span class="se">\\\\</span><span class="s2">windows</span><span class="se">\\</span><span class="s2">path</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="o">+</span>            <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">c:</span><span class="se">\\\\\\\\</span><span class="s2">windows</span><span class="se">\\\\</span><span class="s2">path</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
             <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;windows&quot;</span>
          <span class="p">},</span>
</pre></div>
</div>
<p>The above example is a more pathological case of escaping.  In this example, we
have a string that represents a windows path “c:\windowpath”.  There are two
levels of escaping happening here, one at the JSON parser, and one at the
JMESPath parser.  The JSON parser will take the sequence
<code class="docutils literal notranslate"><span class="pre">&quot;\&quot;c:\\\\\\\\windows\\\\path\&quot;&quot;</span></code> and create the string
<code class="docutils literal notranslate"><span class="pre">&quot;\&quot;c:\\\\windows\\path\&quot;&quot;</span></code>.  The JMESPath parser will take the string
<code class="docutils literal notranslate"><span class="pre">&quot;\&quot;c:\\\\windows\\path\&quot;'</span></code> and, applying its own escaping rules, will
look for a key named <code class="docutils literal notranslate"><span class="pre">c:\\windows\path</span></code>.</p>
</div>
</div>
</div>


                  </div>
  <div class="col-md-3 col-md-pull-9 sphinxsidebar">
    <div class="sphinxsidebarwrapper"><p class="logo"><a href="/">
  <img id="sidebar-logo" src="../_static/img/logo-dark.png" alt="JMESPath Logo" />
</a></p>
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Improved Identifiers</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a><ul>
<li><a class="reference internal" href="#unicode">Unicode</a></li>
<li><a class="reference internal" href="#escape-sequences">Escape Sequences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#impact">Impact</a><ul>
<li><a class="reference internal" href="#basic-json">basic.json</a></li>
<li><a class="reference internal" href="#escape-json">escape.json</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

    </div>
  </div>
              </div>
            </div>

        </div>

<script>
$(document).ready(function() {
    $('.jmespath-demo').each(function(i, el) {
        function evaluateDemo(el) {
            var expression = $(el).find('.jmespath-expression').val();
            var inputData = JSON.parse($(el).find('.jmespath-input').val());
            var result = jmespath.search(inputData, expression);
            $(el).find('.jmespath-result').text(JSON.stringify(result, null, 2));
        }
        $(el).find('.jmespath-expression').bind('keyup', function() {
            evaluateDemo(el);
        });
        $(el).find('.jmespath-input').bind('keyup', function() {
            evaluateDemo(el);
        });
        evaluateDemo(el);
    });
    $('.jmespath-form').submit(function() {
      return false;
    });

    $('.collapse').on('shown.bs.collapse', function() {
        $(this).parent().find(".glyphicon-chevron-right").removeClass(
            "glyphicon-chevron-right").addClass("glyphicon-chevron-down");
    }).on('hidden.bs.collapse', function(){
        $(this).parent().find(".glyphicon-chevron-down").removeClass(
            "glyphicon-chevron-down").addClass("glyphicon-chevron-right");
    });

})
</script>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="jep-007-filter-expressions.html" title="Filter Expressions"
             >next</a> |</li>
        <li class="right" >
          <a href="jep-005-array-slices.html" title="Array Slice Expressions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">JMESPath</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../proposals.html" >JMESPath Proposals</a> &#187;</li> 
      </ul>
    </div>

  <script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <script type="text/javascript" src="../_static/js/jmespath.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery-migrate-1.2.1.min.js"></script>
  <script src="//static.getclicky.com/js" type="text/javascript"></script>
  <script type="text/javascript">try{ clicky.init(100732121); }catch(e){}</script>
  <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100732121ns.gif" /></p></noscript>
  <div class="footer container">
    &copy; Copyright 2014-2015, James Saryerwinnie.
  </div>
  </body>
</html>